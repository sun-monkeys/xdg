<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="网络," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.1.0" />






<meta name="description" content="实现不同网段地址通信12345678在一个交换机上，配置两个不同网段的地址，只要在两台机器中把网关指自己就可以实现通信。   A: 172.18.0.100/16      ip route add default via 172.18.0.100   B: 172.16.0.100/16      ip route add default via 172.16.0.100   注: A--&amp;gt">
<meta name="keywords" content="网络">
<meta property="og:type" content="article">
<meta property="og:title" content="网络管理基础实验">
<meta property="og:url" content="http://yoursite.com/2018/03/15/linux/实验/网络管理基础实验/index.html">
<meta property="og:site_name" content="Sun-monkey">
<meta property="og:description" content="实现不同网段地址通信12345678在一个交换机上，配置两个不同网段的地址，只要在两台机器中把网关指自己就可以实现通信。   A: 172.18.0.100/16      ip route add default via 172.18.0.100   B: 172.16.0.100/16      ip route add default via 172.16.0.100   注: A--&amp;gt">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-21T01:50:16.925Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络管理基础实验">
<meta name="twitter:description" content="实现不同网段地址通信12345678在一个交换机上，配置两个不同网段的地址，只要在两台机器中把网关指自己就可以实现通信。   A: 172.18.0.100/16      ip route add default via 172.18.0.100   B: 172.16.0.100/16      ip route add default via 172.16.0.100   注: A--&amp;gt">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/03/15/linux/实验/网络管理基础实验/"/>





  <title> 网络管理基础实验 | Sun-monkey </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?822bf9a08ff5afbcfcc481a56a6ad577";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sun-monkey</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Still see you as the whole of my life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-linux">
          <a href="/categories/Linux" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-linux"></i> <br />
            
            Linux
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/categories/Python" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-rub"></i> <br />
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-question">
          <a href="/categories/Question" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bug"></i> <br />
            
            Question
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/linux/实验/网络管理基础实验/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XDG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sun-monkey">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                网络管理基础实验
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T00:00:00+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="实现不同网段地址通信"><a href="#实现不同网段地址通信" class="headerlink" title="实现不同网段地址通信"></a>实现不同网段地址通信</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在一个交换机上，配置两个不同网段的地址，只要在两台机器中把网关指自己就可以实现通信。</span><br><span class="line">   A: 172.18.0.100/16</span><br><span class="line">     <span class="built_in"> ip route </span><span class="builtin-name">add</span><span class="built_in"> default </span>via 172.18.0.100</span><br><span class="line"></span><br><span class="line">   B: 172.16.0.100/16</span><br><span class="line">     <span class="built_in"> ip route </span><span class="builtin-name">add</span><span class="built_in"> default </span>via 172.16.0.100</span><br><span class="line"></span><br><span class="line">   注: A--&gt;B <span class="built_in"> ping </span>172.16.0.100  网络是通的</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。"><a href="#在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。" class="headerlink" title="在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。"></a>在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">centos node1</span><br><span class="line">ip: 192.18.1.100</span><br><span class="line">lo: 6.6.6.6/32</span><br><span class="line">   注: 在配置回环地址的时候，必须指定它是网络中的唯一主机，ping信息才能出去，不然只会自己Ping自己</span><br><span class="line">route <span class="builtin-name">add</span> -host 6.6.6.7 gw 192.18.1.101</span><br><span class="line">   注: 网关相信必须配置，不然无法找到目标（最好来、回都配置一个，能看到发和收的信息，不然只能看一个）</span><br><span class="line"></span><br><span class="line">centos node2</span><br><span class="line">ip: 192.18.1.101</span><br><span class="line">lo: 6.6.6.7/32</span><br><span class="line">route <span class="builtin-name">add</span> -host 6.6.6.6 gw 192.18.1.100</span><br><span class="line"></span><br><span class="line">测试:</span><br><span class="line">   R1:<span class="built_in"> ping </span>-I 6.6.6.6  6.6.6.7</span><br><span class="line">   R2: tcpdump -nn icmp</span><br><span class="line">      注: -i device 指定哪个设备</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="一个主机，A通过三个路由器访问到B（route-ip-等配置信息写清楚）"><a href="#一个主机，A通过三个路由器访问到B（route-ip-等配置信息写清楚）" class="headerlink" title="一个主机，A通过三个路由器访问到B（route ip 等配置信息写清楚）"></a>一个主机，A通过三个路由器访问到B（route ip 等配置信息写清楚）</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A:</span><br><span class="line">B:</span><br><span class="line"></span><br><span class="line">R1:</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.3.0/24 gw 192.168.2.2</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.4.0/24 gw 192.168.2.2</span><br><span class="line">R2:</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.1.0/24 gw 192.168.2.2</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.4.0/24 gw 192.168.3.1</span><br><span class="line">R3:</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.1.0/24 gw 192.168.3.1</span><br><span class="line">  <span class="built_in"> route </span><span class="builtin-name">add</span> -net 192.168.2.0/24 gw 192.168.3.1</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="实现单臂路由功能"><a href="#实现单臂路由功能" class="headerlink" title="实现单臂路由功能"></a>实现单臂路由功能</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">主机A: 17.16.0.123/16</span><br><span class="line">ip<span class="built_in"> route </span><span class="builtin-name">add</span><span class="built_in"> default </span>via 172.16.0.200</span><br><span class="line"></span><br><span class="line">主机B: 172.18.0.123/16</span><br><span class="line">ip<span class="built_in"> route </span><span class="builtin-name">add</span><span class="built_in"> default </span>via 172.18.0.200</span><br><span class="line"></span><br><span class="line">主机路由器:</span><br><span class="line">   eth0     172.16.0.200/16</span><br><span class="line">   eth0:1   172.18.0.200/16</span><br><span class="line">      注: 使用的是同一个网卡，使用别名方式</span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv4/if_forward</span><br><span class="line">   注: 开启转发功能 </span><br><span class="line"></span><br><span class="line">redirect host prohibited     重定向主机禁止</span><br><span class="line">destination host prohibited  目的主机禁止</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="在centos7当中把网卡的命令模式修改成传统模式命令"><a href="#在centos7当中把网卡的命令模式修改成传统模式命令" class="headerlink" title="在centos7当中把网卡的命令模式修改成传统模式命令"></a>在centos7当中把网卡的命令模式修改成传统模式命令</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">第一种方法: 直接编辑/boot/grub2/grub.cfg 配置文件</span><br><span class="line">   找到内核的选项配置（注: 是内核，不是救援模式的内核 --&gt; resuce）</span><br><span class="line">   <span class="attribute">GRUB_CMDLINE_LINUX</span>=<span class="string">"rhgb quiet net.ifnames=0  增加 net.ifnames=0 就可以了</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">第二种方法: 编辑/etc/default/grub  配置文件  GRUB_CMDLINE_LINUX="</span>crashkernel=auto rhgb quiet<span class="string">"</span></span><br><span class="line"><span class="string">   GRUB_CMDLINE_LINUX="</span>rhgb quiet net.<span class="attribute">ifnames</span>=0"</span><br><span class="line">   注：/etc/default/grub这个文件是内核生成的一个模板（之后用这个模板再导入到/etc/grub2.cfg）</span><br><span class="line"></span><br><span class="line">   /etc/grub2.cfg是一个链接文件指向的是  /boot/grub2/grub.cfg</span><br><span class="line">   生成的配置文件导入  grub2-mkconfig -o /etc/grub2.cfg</span><br><span class="line"></span><br><span class="line">   linux16 /vmlinuz-3.10.0-514.el7.x86_64 <span class="attribute">root</span>=UUID=a4c2ad47-cdc5-4cb7-9e29-ac946dfce2f4</span><br><span class="line">     ro <span class="attribute">crashkernel</span>=auto rhgb quiet <span class="attribute">LANG</span>=en_US.UTF-8 net.<span class="attribute">ifnames</span>=0  # 手动修改配置文件直接添加</span><br><span class="line"></span><br><span class="line">   linux16 /vmlinuz-0-rescue-b4a50974a5a2458eb9055827dabe7b05 <span class="attribute">root</span>=UUID=a4c2ad47-cdc5-4cb7-9e29-ac946dfce2f4 </span><br><span class="line">     ro <span class="attribute">crashkernel</span>=net.ifnames=0    </span><br><span class="line">      注: <span class="attribute">GRUB_CMDLINE_LINUX</span>=<span class="string">"rhgb quiet net.ifnames=0"</span></span><br><span class="line">	 </span><br><span class="line">   ro <span class="attribute">crashkernel</span>=auto rhgb quieti net.<span class="attribute">ifnames</span>=0</span><br><span class="line">      注: <span class="attribute">GRUB_CMDLINE_LINUX</span>=<span class="string">"crashkernel=auto rhgb quiet net.ifnames=0"</span></span><br><span class="line">	</span><br><span class="line">最后: 重启系统 </span><br><span class="line">   重启系统之前，要把网卡的配置文件给修改到你想要的命令方式（eth0）</span><br><span class="line">      在网卡的配置文件中 <span class="attribute">DEVICE</span>=名字 这一项</span><br><span class="line">      如果没有修改，可能网卡设备无法正常启动</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Bonding工作模式"><a href="#Bonding工作模式" class="headerlink" title="Bonding工作模式"></a>Bonding工作模式</h1><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Mode</span> <span class="number">0</span> (<span class="keyword">balance-rr) </span>轮转（Round-robin）</span><br><span class="line">   策略: 从头到尾顺序的在每一个slave 接口上面发送数据包。本模式提供负载均衡和容错的能力</span><br><span class="line"><span class="symbol">Mode</span> <span class="number">1</span> (active-<span class="keyword">backup) </span>活动-备份（主备）</span><br><span class="line">   策略: 只有一个slave被激活，当且仅当活动的slave接口失败时才会激活其他slave</span><br><span class="line">      为了避免交换机发生混 乱此时绑定的MAC地址只有一个外部端口上可见</span><br><span class="line"><span class="symbol">Mode</span> <span class="number">3</span> (<span class="keyword">broadcast)</span></span><br><span class="line"><span class="keyword"> </span>  广播策略: 在所有的slave接口上传送所有的报文,提供容错能力</span><br><span class="line"></span><br><span class="line"><span class="symbol">active</span>-<span class="keyword">backup、balance-tlb </span>和 <span class="keyword">balance-alb </span>模式不需要交换机的任何特殊配置。其他绑定模式需要配置交换机以便整合链接</span><br><span class="line">   如: Cisco 交换机需要在 模式 <span class="number">0</span>、<span class="number">2</span> 和 <span class="number">3</span> 中使用 EtherChannel，但在模式<span class="number">4</span>中需要 LACP和 EtherChannel</span><br><span class="line"></span><br><span class="line"><span class="keyword">Bonding配置</span></span><br><span class="line"><span class="keyword"> </span>  创建<span class="keyword">bonding设备的配置文件</span></span><br><span class="line"><span class="keyword"> </span>  /etc/sysconfig/network-scripts/ifcfg-<span class="keyword">bond0</span></span><br><span class="line"><span class="keyword"> </span>     DEVICE<span class="symbol">=bond0</span></span><br><span class="line">      <span class="keyword">BOOTPROTO=none</span></span><br><span class="line"><span class="keyword"> </span>     <span class="keyword">BONDING_OPTS= </span><span class="string">"miimon=100  mode=0"</span></span><br><span class="line">      IPADDR</span><br><span class="line">         注: <span class="number">100</span>毫秒  mode 模式 <span class="number">0</span></span><br><span class="line"></span><br><span class="line">   /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">      DEVICE<span class="symbol">=eth0</span> </span><br><span class="line">      <span class="keyword">BOOTPROTO=none </span></span><br><span class="line">      MASTER<span class="symbol">=bond0</span> </span><br><span class="line">      SLAVE<span class="symbol">=yes</span> </span><br><span class="line">      USERCTL<span class="symbol">=no</span> </span><br><span class="line">   查看<span class="keyword">bond0状态信息: </span>/<span class="meta">proc</span>/net/<span class="keyword">bonding/bond0</span></span><br><span class="line"><span class="keyword"> </span>     /sys/class/net/<span class="keyword">bond0/bonding/mode </span> # 查看模式</span><br><span class="line">	</span><br><span class="line">   miimon 是用来进行链路监测的</span><br><span class="line">      如果miimon<span class="number">=100</span>，那么系统每<span class="number">100</span>ms 监测一次链路连接状态，如果有一条线路不通就转入另一条线路 </span><br><span class="line"></span><br><span class="line">   删除<span class="keyword">bond0</span></span><br><span class="line"><span class="keyword"> </span>     ifconfig <span class="keyword">bond0 </span>down</span><br><span class="line">         注: 再删除相关的配置文件，修改成原来的模式</span><br><span class="line">      rmmod <span class="keyword">bonding</span></span><br><span class="line"><span class="keyword"> </span>        注: 单单的删除配置文件是不行的，要删除模块</span><br><span class="line"></span><br><span class="line">   详细帮助: </span><br><span class="line">      /usr/share/doc/kernel-docversion/Documentation/networking/<span class="keyword">bonding.txt </span></span><br><span class="line"><span class="symbol">      https:</span>//www.kernel.org/doc/Documentation/net working/<span class="keyword">bonding.txt</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="CentOS-7网络属性配置"><a href="#CentOS-7网络属性配置" class="headerlink" title="CentOS 7网络属性配置"></a>CentOS 7网络属性配置</h1><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">CentOS <span class="number">6</span>之前，网络接口使用连续号码命名：eth0、eth1等，</span><br><span class="line">  当增加或删除网卡时，名称可能会发生变化</span><br><span class="line"> </span><br><span class="line">CentOS <span class="number">7</span>使用基于硬件，设备拓扑和设置类型命名:</span><br><span class="line">   (<span class="number">1</span>) 网卡命名机制 systemd对网络设备的命名方式</span><br><span class="line">      (a) 如果Firmware或BIOS为主板上集成的设备提供的索引信息可用，</span><br><span class="line">        且可预测则根据此索引进行命名，例如eno1</span><br><span class="line">      (b) 如果Firmware或BIOS为PCI-E扩展槽所提供的索引信息可用，</span><br><span class="line">        且可预测，则根据此索引进行命名，例如ens1</span><br><span class="line">      (c) 如果硬件接口的物理位置信息可用，则根据此信息进行命名，例如enp2s0</span><br><span class="line">      (d) 如果用户显式启动，也可根据MAC地址进行命名，enx2387a1dc56</span><br><span class="line">      (e) 上述均不可用时，则使用传统命名机制</span><br><span class="line"></span><br><span class="line">网卡名称  注: 跟你的网卡的硬件位置有关、类型有关（保证了稳定性）</span><br><span class="line">   基于BIOS支持启用biosdevname软件</span><br><span class="line">      内置网卡: em1,em2</span><br><span class="line">      pci卡: pYpX  <span class="symbol">Y:</span> slot ,<span class="symbol">X:</span> port</span><br><span class="line"></span><br><span class="line">   (<span class="number">2</span>) 名称组成格式</span><br><span class="line">      <span class="symbol">en:</span> Ethernet 有线局域网</span><br><span class="line">      <span class="symbol">wl:</span> wlan 无线局域网</span><br><span class="line">      <span class="symbol">ww:</span> wwan无线广域网</span><br><span class="line"></span><br><span class="line">   名称类型:</span><br><span class="line">      o&lt;index&gt;: 集成设备的设备索引号</span><br><span class="line">      s&lt;slot&gt;: 扩展槽的索引号</span><br><span class="line">      x&lt;MAC&gt;: 基于MAC地址的命名</span><br><span class="line">      p&lt;bus&gt;s&lt;slot&gt;: enp2s1</span><br><span class="line"></span><br><span class="line">网卡设备的命名过程:</span><br><span class="line">   第一步: udev, 辅助工具程序/<span class="class"><span class="keyword">lib</span>/<span class="title">udev</span>/<span class="title">rename_device</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">udev</span>/<span class="title">rules</span>.<span class="title">d</span>/60-<span class="title">net</span>.<span class="title">rules</span></span></span><br><span class="line">   第二步: biosdevname 会根据/usr/<span class="class"><span class="keyword">lib</span>/<span class="title">udev</span>/<span class="title">rules</span>.<span class="title">d</span>/71<span class="title">biosdevname</span>.<span class="title">rules</span></span></span><br><span class="line">   第三步: 通过检测网络接口设备，根据 /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">udev</span>/<span class="title">rules</span>.<span class="title">d</span>/75-<span class="title">net</span>-<span class="title">description</span>.<span class="title">rules</span></span></span><br><span class="line">      ID_NET_NAME_ONBOARD</span><br><span class="line">      ID_NET_NAME_SLOT</span><br><span class="line">      ID_NET_NAME_PATH</span><br><span class="line"></span><br><span class="line">采用传统命名方式</span><br><span class="line">   (<span class="number">1</span>) 编辑/etc/default/grub配置文件 --&gt; GRUB_CMDLINE_LINUX=<span class="string">"rhgb quiet net.ifnames=0"</span></span><br><span class="line">      注: 加上net.ifnames=<span class="number">0</span> 就可以了（前的已经有了）</span><br><span class="line">      修改的时候内核的有两个（还有另一个基本相同的，是救援模式的内核 --&gt; <span class="keyword">rescue</span>）</span><br><span class="line"></span><br><span class="line">      修改/boot/grub2/grub.cfg</span><br><span class="line">         这个文件的信息很重要（文件有提示不要手动去修改该文件）</span><br><span class="line"></span><br><span class="line">   (<span class="number">2</span>) 为grub2生成其配置文件 grub2-mkconfig -o /etc/grub2.cfg</span><br><span class="line">      注: 上面编辑/etc/default/grub这个文件生成到/etc/grub2.cfg这个文件当中去</span><br><span class="line">         -o 就是重定向的意思</span><br><span class="line"></span><br><span class="line">   (<span class="number">3</span>) 重启系统</span><br><span class="line">      注: 重启系统之前，要把网卡的配置文件给修改，不然网卡启动不了</span><br><span class="line">         修改的时候，注意配置文件里的相关选项 <span class="string">"DEVICE=ens33"</span> 要修改成eth0</span><br><span class="line">         注: 配置文件的名字没有太大的关系</span><br></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络/" rel="tag"># 网络</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/14/linux/基本/网络管理基础命令/" rel="next" title="网络管理基础命令">
                <i class="fa fa-chevron-left"></i> 网络管理基础命令
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/19/question/安装CentOS出现的问题/" rel="prev" title="安装CentOS 7出现的问题">
                安装CentOS 7出现的问题 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="XDG" />
          <p class="site-author-name" itemprop="name">XDG</p>
           
              <p class="site-description motion-element" itemprop="description">Personal Blog</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">53</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sun-monkeys/xdg/" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/xddggg" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#实现不同网段地址通信"><span class="nav-number">1.</span> <span class="nav-text">实现不同网段地址通信</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。"><span class="nav-number">2.</span> <span class="nav-text">在同一交换机上，配置两个不同网段的回环地址，实现两者能够ping通。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一个主机，A通过三个路由器访问到B（route-ip-等配置信息写清楚）"><span class="nav-number">3.</span> <span class="nav-text">一个主机，A通过三个路由器访问到B（route ip 等配置信息写清楚）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#实现单臂路由功能"><span class="nav-number">4.</span> <span class="nav-text">实现单臂路由功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在centos7当中把网卡的命令模式修改成传统模式命令"><span class="nav-number">5.</span> <span class="nav-text">在centos7当中把网卡的命令模式修改成传统模式命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bonding工作模式"><span class="nav-number">6.</span> <span class="nav-text">Bonding工作模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CentOS-7网络属性配置"><span class="nav-number">7.</span> <span class="nav-text">CentOS 7网络属性配置</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XDG</span>
</div>


<div class="powered-by">
   心有猛虎
</div>

<div class="theme-info">
  细嗅蔷薇
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
