<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="systemd," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.1.0" />






<meta name="description" content="systemd12345678910systemd   POST --&amp;gt; Boot Sequence --&amp;gt; Bootloader --&amp;gt; kernel + initramfs(initrd) --&amp;gt; rootfs      --&amp;gt; /sbin/init init:         CentOS 5: SysV init         CentOS 6: Upsta">
<meta name="keywords" content="systemd">
<meta property="og:type" content="article">
<meta property="og:title" content="systemd">
<meta property="og:url" content="http://yoursite.com/2018/04/04/linux/服务/systemd/index.html">
<meta property="og:site_name" content="Sun-monkey">
<meta property="og:description" content="systemd12345678910systemd   POST --&amp;gt; Boot Sequence --&amp;gt; Bootloader --&amp;gt; kernel + initramfs(initrd) --&amp;gt; rootfs      --&amp;gt; /sbin/init init:         CentOS 5: SysV init         CentOS 6: Upsta">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-30T07:58:16.856Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="systemd">
<meta name="twitter:description" content="systemd12345678910systemd   POST --&amp;gt; Boot Sequence --&amp;gt; Bootloader --&amp;gt; kernel + initramfs(initrd) --&amp;gt; rootfs      --&amp;gt; /sbin/init init:         CentOS 5: SysV init         CentOS 6: Upsta">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/04/04/linux/服务/systemd/"/>





  <title> systemd | Sun-monkey </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?822bf9a08ff5afbcfcc481a56a6ad577";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sun-monkey</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Still see you as the whole of my life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-linux">
          <a href="/categories/Linux" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-linux"></i> <br />
            
            Linux
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/categories/Python" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-rub"></i> <br />
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-question">
          <a href="/categories/Question" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bug"></i> <br />
            
            Question
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/04/linux/服务/systemd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XDG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sun-monkey">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                systemd
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T00:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">systemd</span><br><span class="line">   POST --&gt; Boot Sequence --&gt; Bootloader --&gt; kernel + initramfs(initrd) --&gt; rootfs</span><br><span class="line">      --&gt; /sbin/init init:</span><br><span class="line">         CentOS 5: SysV init</span><br><span class="line">         CentOS 6: Upstart</span><br><span class="line">         CentOS 7: Systemd</span><br><span class="line">Systemd: 系统启动和服务器守护进程管理器，负责在系统启动或运行时，激活系统资源，服务器进程和其它进程</span><br><span class="line"></span><br><span class="line">注: 命令的补全功能 --&gt; yum install bash-completion   # 在epel源上的rpm,然后重新登录</span><br><span class="line">注: 在有的系统版本当中，有的命令没有的自动补全功能（比如二组命令 --&gt;<span class="built_in"> ip </span><span class="built_in">..</span>. ）</span><br></pre></td></tr></table></figure>
<h2 id="Systemd新特性"><a href="#Systemd新特性" class="headerlink" title="Systemd新特性"></a>Systemd新特性</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(1) 系统引导时实现服务并行启动</span><br><span class="line">(2) 按需启动守护进程</span><br><span class="line">(3) 自动化的服务依赖关系管理</span><br><span class="line">   在centos 6中如果一个相关联的服务关闭，则该服务起动不了</span><br><span class="line">   在centos 7中如果一个相关联的服务关闭，则该服务起动时，会把相关联的服务也起动起来</span><br><span class="line">(4) 同时采用socket式与D-Bus总线式激活服务</span><br><span class="line">(5) 系统状态快照</span><br><span class="line"></span><br><span class="line">核心概念</span><br><span class="line">   unit unit表示不同类型的systemd对象，通过配置文件进行标识和配置；文件中主要包含了系统服务、</span><br><span class="line">     监听socket、保存的系统快照以及其它与init相关的信息</span><br><span class="line"></span><br><span class="line">   配置文件:</span><br><span class="line">      /usr/lib/systemd<span class="built_in">/system </span> # 每个服务最主要的启动脚本设置，类似于之前的/etc/init.d/所有的服务</span><br><span class="line">      /run/systemd<span class="built_in">/system </span> # 系统执行过程中所产生的服务脚本，比上面目录优先运行</span><br><span class="line"></span><br><span class="line">      /etc/systemd<span class="built_in">/system </span> # 管理员建立的执行脚本，类似于/etc/rc.d/rcN.d/Sxx类的功能，比上面目录优先运行</span><br><span class="line">      注: 自己建立的执行脚本，最好放在这里，优先级高</span><br></pre></td></tr></table></figure>
<h2 id="Unit类型"><a href="#Unit类型" class="headerlink" title="Unit类型"></a>Unit类型</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Systemctl –t help  # 查看<span class="keyword">unit</span>类型，列出当前所有有效的<span class="keyword">unit</span>类型</span><br><span class="line">Service <span class="keyword">unit</span>  # 文件扩展名为.service, 用于定义系统服务</span><br><span class="line"><span class="keyword">Target</span> <span class="keyword">unit</span>  # 文件扩展名为.<span class="keyword">target</span>，用于模拟实现运行级别</span><br><span class="line">Device <span class="keyword">unit</span>  # .device, 用于定义内核识别的设备</span><br><span class="line">Mount <span class="keyword">unit</span>  # .mount, 定义文件系统挂载点</span><br><span class="line">Socket <span class="keyword">unit</span>  # .socket, 用于标识进程间通信用的socket文件，也可在系统启动时，延迟启动服务，实现按需启动</span><br><span class="line">Snapshot <span class="keyword">unit</span>  # .snapshot, 管理系统快照</span><br><span class="line">Swap <span class="keyword">unit</span>  # .swap, 用于标识swap设备</span><br><span class="line">Automount <span class="keyword">unit</span>  # .automount，文件系统的自动挂载点</span><br><span class="line">Path <span class="keyword">unit</span>  # .path，用于定义文件系统中的一个文件或目录使用,常用于当文件系统变化时，延迟激活服务</span><br><span class="line">   如: spool 目录</span><br></pre></td></tr></table></figure>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">关键特性</span><br><span class="line">   基于<span class="built_in">socket</span>的激活机制  <span class="comment"># socket与服务程序分离</span></span><br><span class="line">   基于d-bus的激活机制</span><br><span class="line">   基于device的激活机制</span><br><span class="line">   基于path的激活机制  <span class="comment"># 系统快照: 保存各unit的当前状态信息于持久存储设备中，向后兼容sysv init脚本</span></span><br><span class="line">不兼容</span><br><span class="line">   systemctl命令固定不变，不可扩展</span><br><span class="line">   非由systemd启动的服务，systemctl无法与之通信和控制</span><br></pre></td></tr></table></figure>
<h2 id="管理服务"><a href="#管理服务" class="headerlink" title="管理服务"></a>管理服务</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">管理系统服务</span><br><span class="line">   CentOS 7   #<span class="built_in"> service </span>unit</span><br><span class="line">   注意: 能兼容早期的服务脚本</span><br><span class="line"></span><br><span class="line">命令: systemctl COMMAND name.service （.service 可以省略）</span><br><span class="line">启动:<span class="built_in"> service </span>name start ==&gt; systemctl start name.service</span><br><span class="line">停止:<span class="built_in"> service </span>name stop ==&gt; systemctl stop name.service</span><br><span class="line">重启:<span class="built_in"> service </span>name restart ==&gt; systemctl restart name.service</span><br><span class="line">状态:<span class="built_in"> service </span>name status ==&gt; systemctl status name.service</span><br><span class="line"></span><br><span class="line">条件式重启  # 已启动才重启，否则不做操作</span><br><span class="line">  <span class="built_in"> service </span>name condrestart ==&gt; systemctl try-restart name.service</span><br><span class="line"></span><br><span class="line">重载或重启服务  # 先加载，再启动</span><br><span class="line">   systemctl reload-or-restart name.service</span><br><span class="line"></span><br><span class="line">重载或条件式重启服务</span><br><span class="line">   systemctl reload-or-try-restart name.service</span><br><span class="line"></span><br><span class="line">禁止自动和手动启动</span><br><span class="line">   systemctl mask name.service</span><br><span class="line">例: systemctl mask httpd</span><br><span class="line">   Created symlink <span class="keyword">from</span> /etc/systemd/system/httpd.service <span class="keyword">to</span> /dev/<span class="literal">null</span>.</span><br><span class="line">   提示会把这个服务链接到/dev/<span class="literal">null</span>里面，导致无法启动</span><br><span class="line"></span><br><span class="line">取消禁止</span><br><span class="line">   systemctl unmask name.service  # 就是把那个链接文件给删除就可以了</span><br></pre></td></tr></table></figure>
<h2 id="服务查看"><a href="#服务查看" class="headerlink" title="服务查看"></a>服务查看</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">查看某服务当前激活与否的状态</span><br><span class="line">   <span class="string">systemctl </span><span class="string">is-active </span><span class="string">name.</span><span class="string">service</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line">查看所有已经激活的服务</span><br><span class="line">   <span class="string">systemctl </span><span class="built_in">list-units</span>   <span class="built_in">--type</span> | -t   <span class="string">service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">查</span>看所有服务</span><br><span class="line">   <span class="string">systemctl </span><span class="built_in">list-units</span> <span class="built_in">--type</span> <span class="string">service </span> –<span class="string">all </span>| -a</span><br><span class="line"></span><br><span class="line"><span class="string">chkconfig命</span>令的对应关系</span><br><span class="line">   设定某服务开机自启</span><br><span class="line">      <span class="string">chkconfig </span><span class="string">name </span><span class="string">on </span>==&gt; <span class="string">systemctl </span><span class="string">enable </span><span class="string">name.</span><span class="string">service </span></span><br><span class="line">   设定某服务开机禁止启动</span><br><span class="line">      <span class="string">chkconfig </span><span class="string">name </span><span class="string">off </span>==&gt; <span class="string">systemctl </span><span class="string">disable </span><span class="string">name.</span><span class="string">service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  查看所有服务的开机自启状态</span><br><span class="line">      <span class="string">chkconfig </span><span class="built_in">--list</span> ==&gt; <span class="string">systemctl </span><span class="built_in">list-unit-files</span> -t <span class="string">service </span></span><br><span class="line">      <span class="comment"># 直接是-t  不是-type没有这个选项</span></span><br><span class="line">   用来列出该服务在哪些运行级别下启用和禁用</span><br><span class="line">      <span class="string">chkconfig </span><span class="string">sshd </span>–<span class="string">list </span>==&gt; <span class="string">ls </span>/<span class="string">etc/</span><span class="string">systemd/</span><span class="string">system/</span>*.<span class="string">wants/</span><span class="string">sshd.</span><span class="string">service</span></span><br><span class="line"><span class="string"> </span>  查看服务是否开机自启</span><br><span class="line">      <span class="string">systemctl </span><span class="string">is-enabled </span><span class="string">name.</span><span class="string">service </span></span><br><span class="line">	</span><br><span class="line">其它命令</span><br><span class="line">   查看服务的依赖关系</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">list-dependencies</span> <span class="string">name.</span><span class="string">service</span></span><br><span class="line"><span class="string"> </span>     例: <span class="string">systemctl </span><span class="built_in">list-dependencies</span>  <span class="string">nfs-server.</span><span class="string">service</span></span><br><span class="line"><span class="string"> </span>  杀掉进程</span><br><span class="line">      <span class="string">systemctl </span><span class="string">kill </span>进程名</span><br></pre></td></tr></table></figure>
<h2 id="服务状态"><a href="#服务状态" class="headerlink" title="服务状态"></a>服务状态</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">systemctl </span><span class="built_in">list-unit-files</span> <span class="built_in">--type</span> <span class="string">service </span><span class="built_in">--all</span>  <span class="comment"># 显示状态</span></span><br><span class="line"><span class="string">loaded:Unit </span> <span class="comment"># 配置文件已处理</span></span><br><span class="line"><span class="string">active(</span><span class="string">running)</span>  <span class="comment"># 一次或多次持续处理的运行</span></span><br><span class="line"><span class="string">active(</span><span class="string">exited)</span>  <span class="comment"># 成功完成一次性的配置</span></span><br><span class="line"><span class="string">active(</span><span class="string">waiting)</span>  <span class="comment"># 运行中，等待一个事件</span></span><br><span class="line"><span class="string">inactive </span> <span class="comment"># 不运行</span></span><br><span class="line"><span class="string">enabled </span>  <span class="comment"># 开机启动</span></span><br><span class="line"><span class="string">disabled </span> <span class="comment"># 开机不启动</span></span><br><span class="line"><span class="string">static </span>   <span class="comment"># 开机不启动，但可被另一个启用的服务激活</span></span><br><span class="line"></span><br><span class="line"><span class="string">systemctl</span></span><br><span class="line"><span class="string"> </span>  显示所有单元状态</span><br><span class="line">      <span class="string">systemctl </span>或 <span class="string">systemctl </span><span class="built_in">list-units</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   只显示服务单元的状态</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">--type=service</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   显示<span class="string">sshd服</span>务单元</span><br><span class="line">      <span class="string">systemctl </span>-l  <span class="string">status </span><span class="string">sshd.</span><span class="string">service</span></span><br><span class="line"><span class="string"> </span>     注: -l 显示的内容更加的详细，比如启动的时候出现什么故障</span><br><span class="line"></span><br><span class="line">   验证<span class="string">sshd服</span>务当前是否活动</span><br><span class="line">      <span class="string">systemctl </span><span class="string">is-active </span><span class="string">sshd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  重新加载配置</span><br><span class="line">      <span class="string">systemctl </span><span class="string">reload </span><span class="string">sshd.</span><span class="string">service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  列出活动状态的所有服务单元</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">list-units</span> <span class="built_in">--type=service</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   列出所有服务单元</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">list-units</span> <span class="built_in">--type=service</span> <span class="built_in">--all</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   查看服务单元的启用和禁用状态</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">list-unit-files</span>  <span class="built_in">--type=service</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   列出失败的服务</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">--failed</span> <span class="built_in">--type=service</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in"></span>   列出依赖的单元</span><br><span class="line">      <span class="string">systemctl </span><span class="built_in">list-dependencies</span> <span class="string">sshd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  验证<span class="string">sshd服</span>务是否开机启动</span><br><span class="line">      <span class="string">systemctl </span><span class="string">is-enabled </span><span class="string">sshd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  禁用<span class="string">network </span> <span class="comment"># 使之不能自动启动,但手动可以</span></span><br><span class="line">      <span class="string">systemctl </span><span class="string">disable </span><span class="string">network</span></span><br><span class="line"><span class="string"> </span>  启用</span><br><span class="line">      <span class="string">network </span><span class="string">systemctl </span><span class="string">enable </span> <span class="string">network</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span>  禁用<span class="string">network </span> <span class="comment"># 使之不能手动或自动启动</span></span><br><span class="line">      <span class="string">systemctl </span><span class="string">mask </span><span class="string">network</span></span><br><span class="line"><span class="string"> </span>  启用</span><br><span class="line">      <span class="string">network </span><span class="string">systemctl </span><span class="string">unmask </span><span class="string">network</span></span><br></pre></td></tr></table></figure>
<h2 id="运行级别"><a href="#运行级别" class="headerlink" title="运行级别"></a>运行级别</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">target </span><span class="string">units</span></span><br><span class="line"><span class="string"> </span>  <span class="string">unit配</span>置文件: .<span class="string">target</span></span><br><span class="line"><span class="string"> </span>  <span class="string">ls </span>/<span class="string">usr/</span><span class="string">lib/</span><span class="string">systemd/</span><span class="string">system/</span>*.<span class="string">target</span></span><br><span class="line"><span class="string"> </span>  <span class="string">systemctl </span><span class="built_in">list-unit-files</span> <span class="built_in">--type</span> <span class="string">target </span> <span class="built_in">--all</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">运行级别:</span></span><br><span class="line"><span class="built_in"></span>   0  ==&gt; <span class="string">runlevel0.</span><span class="string">target,</span> <span class="string">poweroff.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  1  ==&gt; <span class="string">runlevel1.</span><span class="string">target,</span> <span class="string">rescue.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  2  ==&gt; <span class="string">runlevel2.</span><span class="string">target,</span> <span class="string">multi-user.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  3  ==&gt; <span class="string">runlevel3.</span><span class="string">target,</span> <span class="string">multi-user.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  4  ==&gt; <span class="string">runlevel4.</span><span class="string">target,</span> <span class="string">multi-user.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  5  ==&gt; <span class="string">runlevel5.</span><span class="string">target,</span> <span class="string">graphical.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  6  ==&gt; <span class="string">runlevel6.</span><span class="string">target,</span> <span class="string">reboot.</span><span class="string">target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">查</span>看依赖性:</span><br><span class="line">   <span class="string">systemctl </span><span class="built_in">list-dependencies</span> <span class="string">graphical.</span><span class="string">target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">级</span>别切换: <span class="string">init </span>N ==&gt; <span class="string">systemctl </span><span class="string">isolate </span><span class="string">name.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  <span class="string">systemctl </span><span class="string">isolate </span><span class="string">multi-user.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  注: 只有/<span class="string">lib/</span><span class="string">systemd/</span><span class="string">system/</span>*.<span class="string">target文</span>件中</span><br><span class="line">   <span class="string">AllowIsolate=</span><span class="string">yes </span> <span class="comment"># 才能切换(修改文件需执行systemctl daemon-reload才能生效)</span></span><br><span class="line">      注: 在文件/<span class="string">lib/</span><span class="string">systemd/</span><span class="string">system/</span>*.<span class="string">target </span>（*：<span class="string">multi-user）</span>每个都有对应的设置,</span><br><span class="line">         打开之后里的配置文件，<span class="string">unit单</span>元的参数 <span class="string">AllowIsolate=</span><span class="string">yes </span> <span class="comment"># 改成yes</span></span><br><span class="line"></span><br><span class="line">查看<span class="string">target:</span></span><br><span class="line">   <span class="string">runlevel;</span> <span class="string">who </span>-r</span><br><span class="line">   <span class="string">systemctl </span><span class="built_in">list-units</span> <span class="built_in">--type</span> <span class="string">target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">获</span>取默认运行级别</span><br><span class="line">   /<span class="string">etc/</span><span class="string">inittab </span>==&gt; <span class="string">systemctl </span><span class="built_in">get-default</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">修改默认级别</span></span><br><span class="line"><span class="built_in"></span>   /<span class="string">etc/</span><span class="string">inittab </span>==&gt; <span class="string">systemctl </span><span class="built_in">set-default</span> <span class="string">name.</span><span class="string">target</span></span><br><span class="line"><span class="string"> </span>  <span class="string">systemctl </span><span class="built_in">set-default</span> <span class="string">multi-user.</span><span class="string">target </span>  <span class="comment"># 设定默认级别为 3  # graphical.target  5</span></span><br><span class="line">   <span class="string">ls </span>–l /<span class="string">etc/</span><span class="string">systemd/</span><span class="string">system/</span><span class="string">default.</span><span class="string">target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">切</span>换至紧急救援模式</span><br><span class="line">   <span class="string">systemctl </span><span class="string">rescue </span> <span class="comment"># 单用户模式</span></span><br><span class="line">切换至<span class="string">emergency模</span>式</span><br><span class="line">   <span class="string">systemctl </span><span class="string">emergency</span></span><br></pre></td></tr></table></figure>
<h2 id="其它常用命令"><a href="#其它常用命令" class="headerlink" title="其它常用命令"></a>其它常用命令</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">传统命令init，poweroff，halt，reboot都成为<span class="keyword"> system</span>ctl的软链接</span><br><span class="line">   关机:<span class="keyword"> system</span>ctl halt、systemctl poweroff</span><br><span class="line">   重启:<span class="keyword"> system</span>ctl reboot</span><br><span class="line">   挂起:<span class="keyword"> system</span>ctl suspend</span><br><span class="line">   休眠:<span class="keyword"> system</span>ctl hibernate</span><br><span class="line">   休眠并挂起:<span class="keyword"> system</span>ctl hybrid-sleep</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="CentOS7引导顺序"><a href="#CentOS7引导顺序" class="headerlink" title="CentOS7引导顺序"></a>CentOS7引导顺序</h1><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>) UEFi或BIOS初始化，运行POST开机自检</span><br><span class="line">(<span class="number">2</span>) 选择启动设备</span><br><span class="line">(<span class="number">3</span>) 引导装载程序, centos7是grub2</span><br><span class="line">(<span class="number">4</span>) 加载装载程序的配置文件: /etc/grub.d/  /etc/<span class="keyword">default</span>/grub  /boot/grub2/grub.cfg</span><br><span class="line">(5) 加载initramfs驱动模块</span><br><span class="line">(6) 加载内核选项</span><br><span class="line">(7) 内核初始化，centos7使用systemd代替init</span><br><span class="line">(8) 执行initrd.<span class="keyword">target</span>所有单元，包括挂载/etc/fstab</span><br><span class="line">(9) 从initramfs根文件系统切换到磁盘根目录</span><br><span class="line">(10) systemd执行默认<span class="keyword">target</span>配置，配置文件 /etc/systemd/system/<span class="keyword">default</span>.<span class="keyword">target</span></span><br><span class="line">   systemd执行sysinit.<span class="keyword">target</span>初始化系统及basic.<span class="keyword">target</span>准备操作系统</span><br><span class="line">   systemd启动multi-user.<span class="keyword">target</span>下的本机与服务器服务</span><br><span class="line">   systemd执行multi-user.<span class="keyword">target</span>下的/etc/rc.d/rc.local</span><br><span class="line">   Systemd执行multi-user.<span class="keyword">target</span>下的getty.<span class="keyword">target</span>及登录服务</span><br><span class="line">   systemd执行graphical需要的服务</span><br></pre></td></tr></table></figure>
<h2 id="service-unit文件格式"><a href="#service-unit文件格式" class="headerlink" title="service　unit文件格式"></a>service　unit文件格式</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/etc/systemd<span class="built_in">/system </span> # 系统管理员和用户使用</span><br><span class="line">/usr/lib/systemd<span class="built_in">/system </span> # 发行版打包者使用</span><br><span class="line">以 <span class="string">"#"</span> 开头的行后面的内容会被认为是注释</span><br><span class="line">相关布尔值，1、<span class="literal">yes</span>、on、<span class="literal">true</span> 都是开启，0、<span class="literal">no</span>、off、<span class="literal">false</span>都是关闭</span><br><span class="line">时间单位默认是秒，所以要用毫秒（ms）分钟（m）等须显式说明</span><br><span class="line">service unit file文件通常由三部分组成:</span><br><span class="line">   [Unit]: 定义与Unit类型无关的通用选项，用于提供unit的描述信息、unit行为及依赖关系等</span><br><span class="line">   [Service]: 与特定类型相关的专用选项，此处为Service类型</span><br><span class="line">   [Install]: 定义由<span class="string">"systemctl enable"</span>以及<span class="string">"systemctl disable"</span>命令在实现服务启用或禁用时用到的一些选项</span><br></pre></td></tr></table></figure>
<h2 id="Unit段的常用选项"><a href="#Unit段的常用选项" class="headerlink" title="Unit段的常用选项"></a>Unit段的常用选项</h2><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Description  <span class="comment"># 描述信息</span></span><br><span class="line"><span class="section">注: 在服务没有启动的时候，查看状态的时候，可以查看及时修改的信息，</span></span><br><span class="line">   如果在服务启动的时候，查看状态的时候，查看不了及时修改的信息（需要重新新加载查看或重启）</span><br><span class="line">After  <span class="comment"># 定义unit的启动次序，表示当前unit应该晚于哪些unit启动，其功能与Before相反</span></span><br><span class="line">Requires  <span class="comment"># 依赖到的其它units，强依赖，被依赖的units无法激活时，当前unit也无法激活</span></span><br><span class="line">Wants  <span class="comment"># 依赖到的其它units，弱依赖</span></span><br><span class="line">Conflicts  <span class="comment"># 定义units间的冲突关系</span></span><br></pre></td></tr></table></figure>
<p>Service段的常用选项<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Type</span>  <span class="comment"># 定义影响ExecStart及相关参数的功能的unit进程启动类型</span></span><br><span class="line">   simple  <span class="comment"># 默认值，这个daemon主要由ExecStart接的指令串来启动，启动后常驻于内存中</span></span><br><span class="line">   forking  <span class="comment"># 由ExecStart启动的程序透过spawns延伸出其他子程序来作为此daemon的主要服务</span></span><br><span class="line">      原生父程序在启动结束后就会终止</span><br><span class="line">   oneshot  <span class="comment"># 与simple类似，不过这个程序在工作完毕后就结束了，不会常驻在内存中</span></span><br><span class="line">   dbus  <span class="comment"># 与simple类似，但这个daemon必须要在取得一个D-Bus的名称后，才会继续运作</span></span><br><span class="line">      因此通常也要同时设定<span class="attr">BusNname=</span> 才行</span><br><span class="line">   notify  <span class="comment"># 在启动完成后会发送一个通知消息，还需要配合NotifyAccess来让Systemd 接收消息</span></span><br><span class="line">   idle  <span class="comment"># 与simple类似，要执行这个daemon必须要所有的工作都顺利执行完毕后才会执行</span></span><br><span class="line">      这类的daemon通常是开机到最后才执行即可的服务</span><br><span class="line">EnvironmentFile  <span class="comment"># 环境配置文件</span></span><br><span class="line">ExecStart  <span class="comment"># 指明启动unit要运行命令或脚本的绝对路径</span></span><br><span class="line">ExecStartPre  <span class="comment"># ExecStart前运行</span></span><br><span class="line">ExecStartPost  <span class="comment"># ExecStart后运行</span></span><br><span class="line">ExecStop  <span class="comment"># 指明停止unit要运行的命令或脚本</span></span><br><span class="line">Restart  <span class="comment"># 当设定Restart=1 时，则当次daemon服务意外终止后，会再次自动启动此服务</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Install段的常用选项"><a href="#Install段的常用选项" class="headerlink" title="Install段的常用选项"></a>Install段的常用选项</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Alias  # 别名，可使用systemctl command Alias.service</span><br><span class="line">RequiredBy  # 被哪些units所依赖，强依赖</span><br><span class="line">WantedBy  # 被哪些units所依赖，弱依赖</span><br><span class="line">Also  # 安装本服务的时候还要安装别的相关服务</span><br><span class="line"></span><br><span class="line">注意: 对于新创建的unit文件，或者修改了的unit文件，要通知systemd重载此配置文件,</span><br><span class="line">   而后可以选择重启 systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">例:</span><br><span class="line">   vim /etc/systemd/system/bak.service</span><br><span class="line">      [Unit]</span><br><span class="line">      <span class="attribute">Description</span>=backup  /etc</span><br><span class="line">      <span class="attribute">Requires</span>=atd.service</span><br><span class="line">      [Service]</span><br><span class="line">      <span class="attribute">Type</span>=simple</span><br><span class="line">      <span class="attribute">ExecStart</span>=/bin/bash -c <span class="string">"echo /testdir/bak.sh | at now"</span></span><br><span class="line">      [Install]</span><br><span class="line">      <span class="attribute">WantedBy</span>=multi-user.target</span><br><span class="line"></span><br><span class="line">   systemctl daemon-reload</span><br><span class="line">   systemctl start bak</span><br></pre></td></tr></table></figure>
<h2 id="设置内核参数"><a href="#设置内核参数" class="headerlink" title="设置内核参数"></a>设置内核参数</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">设置内核参数，只影响当次启动</span><br><span class="line">启动时，在linux16行后添加systemd.<span class="keyword">unit</span>=desired.<span class="keyword">target</span></span><br><span class="line"></span><br><span class="line">   systemd.<span class="keyword">unit</span>=emergency.<span class="keyword">target</span></span><br><span class="line">   systemd.<span class="keyword">unit</span>=recure.<span class="keyword">target</span></span><br><span class="line">   # recure.<span class="keyword">target</span> 比 emergency 支持更多的功能，例如日志等</span><br></pre></td></tr></table></figure>
<h2 id="启动排错"><a href="#启动排错" class="headerlink" title="启动排错"></a>启动排错</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">文件系统损坏</span><br><span class="line">   先尝试自动修复，失败则进入emergency <span class="keyword">shell</span><span class="bash">，提示用户修复</span></span><br><span class="line"><span class="bash">   在/etc/fstab不存在对应的设备和UUID 等一段时间，如不可用，进入emergency shell</span></span><br><span class="line"><span class="bash">   在/etc/fstab不存在对应挂载点 systemd 尝试创建挂载点，否则提示进入emergency shell</span></span><br><span class="line"><span class="bash">   在/etc/fstab不正确的挂载选项，提示进入emergency shell</span></span><br></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/systemd/" rel="tag"># systemd</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/03/linux/基本/awk -2/" rel="next" title="AWK -2">
                <i class="fa fa-chevron-left"></i> AWK -2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/05/linux/服务/centos7 修改口令和修复/" rel="prev" title="CentOS 7修改口令和修改">
                CentOS 7修改口令和修改 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="XDG" />
          <p class="site-author-name" itemprop="name">XDG</p>
           
              <p class="site-description motion-element" itemprop="description">Personal Blog</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">56</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">61</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sun-monkeys/xdg/" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/xddggg" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#systemd"><span class="nav-number">1.</span> <span class="nav-text">systemd</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Systemd新特性"><span class="nav-number">1.1.</span> <span class="nav-text">Systemd新特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unit类型"><span class="nav-number">1.2.</span> <span class="nav-text">Unit类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特性"><span class="nav-number">1.3.</span> <span class="nav-text">特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管理服务"><span class="nav-number">1.4.</span> <span class="nav-text">管理服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务查看"><span class="nav-number">1.5.</span> <span class="nav-text">服务查看</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务状态"><span class="nav-number">1.6.</span> <span class="nav-text">服务状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运行级别"><span class="nav-number">1.7.</span> <span class="nav-text">运行级别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其它常用命令"><span class="nav-number">1.8.</span> <span class="nav-text">其它常用命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CentOS7引导顺序"><span class="nav-number">2.</span> <span class="nav-text">CentOS7引导顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#service-unit文件格式"><span class="nav-number">2.1.</span> <span class="nav-text">service　unit文件格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unit段的常用选项"><span class="nav-number">2.2.</span> <span class="nav-text">Unit段的常用选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install段的常用选项"><span class="nav-number">2.3.</span> <span class="nav-text">Install段的常用选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置内核参数"><span class="nav-number">2.4.</span> <span class="nav-text">设置内核参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动排错"><span class="nav-number">2.5.</span> <span class="nav-text">启动排错</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XDG</span>
</div>


<div class="powered-by">
   心有猛虎
</div>

<div class="theme-info">
  细嗅蔷薇
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
